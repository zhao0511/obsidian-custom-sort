/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var Ht=Object.defineProperty;var xn=Object.getOwnPropertyDescriptor;var En=Object.getOwnPropertyNames;var Dn=Object.prototype.hasOwnProperty;var Sn=(Z,P)=>()=>(P||Z((P={exports:{}}).exports,P),P.exports),Cn=(Z,P)=>{for(var d in P)Ht(Z,d,{get:P[d],enumerable:!0})},Tn=(Z,P,d,c)=>{if(P&&typeof P=="object"||typeof P=="function")for(let b of En(P))!Dn.call(Z,b)&&b!==d&&Ht(Z,b,{get:()=>P[b],enumerable:!(c=xn(P,b))||c.enumerable});return Z};var _n=Z=>Tn(Ht({},"__esModule",{value:!0}),Z);var dn=Sn((Vt,Wt)=>{(function(Z,P){typeof Vt=="object"&&typeof Wt!="undefined"?Wt.exports=P():typeof define=="function"&&define.amd?define(P):(Z=Z||self).Sortable=P()})(Vt,function(){"use strict";function Z(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,n)),i}function P(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z(Object(n),!0).forEach(function(i){var o,a;o=e,i=n[a=i],a in o?Object.defineProperty(o,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[a]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function d(e){return(d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function b(e,t){if(e==null)return{};var n,i=function(s,r){if(s==null)return{};for(var l,h={},g=Object.keys(s),x=0;x<g.length;x++)l=g[x],0<=r.indexOf(l)||(h[l]=s[l]);return h}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n]);return i}function w(e){return function(t){if(Array.isArray(t))return v(t)}(e)||function(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,n){if(t){if(typeof t=="string")return v(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return(i=i==="Object"&&t.constructor?t.constructor.name:i)==="Map"||i==="Set"?Array.from(t):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?v(t,n):void 0}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function v(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function I(e){if(typeof window!="undefined"&&window.navigator)return!!navigator.userAgent.match(e)}var N=I(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Q=I(/Edge/i),T=I(/firefox/i),F=I(/safari/i)&&!I(/chrome/i)&&!I(/android/i),G=I(/iP(ad|od|hone)/i),Qe=I(/chrome/i)&&I(/android/i),ee={capture:!1,passive:!1};function f(e,t,n){e.addEventListener(t,n,!N&&ee)}function m(e,t,n){e.removeEventListener(t,n,!N&&ee)}function pe(e,t){if(t&&(t[0]===">"&&(t=t.substring(1)),e))try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(n){return}}function ne(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function k(e,t,n,i){if(e){n=n||document;do if(t!=null&&(t[0]!==">"||e.parentNode===n)&&pe(e,t)||i&&e===n)return e;while(e!==n&&(e=ne(e)))}return null}var U,fe=/\s+/g;function _(e,t,n){var i;e&&t&&(e.classList?e.classList[n?"add":"remove"](t):(i=(" "+e.className+" ").replace(fe," ").replace(" "+t+" "," "),e.className=(i+(n?" "+t:"")).replace(fe," ")))}function p(e,t,n){var i=e&&e.style;if(i){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];i[t=t in i||t.indexOf("webkit")!==-1?t:"-webkit-"+t]=n+(typeof n=="string"?"":"px")}}function ye(e,t){var n="";if(typeof e=="string")n=e;else do var i=p(e,"transform");while(i&&i!=="none"&&(n=i+" "+n),!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function Se(e,t,n){if(e){var i=e.getElementsByTagName(t),o=0,a=i.length;if(n)for(;o<a;o++)n(i[o],o);return i}return[]}function we(){var e=document.scrollingElement;return e||document.documentElement}function Y(e,t,n,i,o){if(e.getBoundingClientRect||e===window){var a,s,r,l,h,g,x=e!==window&&e.parentNode&&e!==we()?(s=(a=e.getBoundingClientRect()).top,r=a.left,l=a.bottom,h=a.right,g=a.height,a.width):(r=s=0,l=window.innerHeight,h=window.innerWidth,g=window.innerHeight,window.innerWidth);if((t||n)&&e!==window&&(o=o||e.parentNode,!N))do if(o&&o.getBoundingClientRect&&(p(o,"transform")!=="none"||n&&p(o,"position")!=="static")){var X=o.getBoundingClientRect();s-=X.top+parseInt(p(o,"border-top-width")),r-=X.left+parseInt(p(o,"border-left-width")),l=s+a.height,h=r+a.width;break}while(o=o.parentNode);return i&&e!==window&&(i=(t=ye(o||e))&&t.a,e=t&&t.d,t&&(l=(s/=e)+(g/=e),h=(r/=i)+(x/=i))),{top:s,left:r,bottom:l,right:h,width:x,height:g}}}function Kt(e,t,n){for(var i=Ie(e,!0),o=Y(e)[t];i;){var a=Y(i)[n];if(!(n==="top"||n==="left"?a<=o:o<=a))return i;if(i===we())break;i=Ie(i,!1)}return!1}function Le(e,t,n,i){for(var o=0,a=0,s=e.children;a<s.length;){if(s[a].style.display!=="none"&&s[a]!==y.ghost&&(i||s[a]!==y.dragged)&&k(s[a],n.draggable,e,!1)){if(o===t)return s[a];o++}a++}return null}function Dt(e,t){for(var n=e.lastElementChild;n&&(n===y.ghost||p(n,"display")==="none"||t&&!pe(n,t));)n=n.previousElementSibling;return n||null}function W(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()==="TEMPLATE"||e===y.clone||t&&!pe(e,t)||n++;return n}function Gt(e){var t=0,n=0,i=we();if(e)do var a=ye(e),o=a.a,a=a.d;while(t+=e.scrollLeft*o,n+=e.scrollTop*a,e!==i&&(e=e.parentNode));return[t,n]}function Ie(e,t){if(!e||!e.getBoundingClientRect)return we();var n=e,i=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=p(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return we();if(i||t)return n;i=!0}}while(n=n.parentNode);return we()}function St(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function Ut(e,t){return function(){var n;U||((n=arguments).length===1?e.call(this,n[0]):e.apply(this,n),U=setTimeout(function(){U=void 0},t))}}function qt(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Ct(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function $t(e,t){p(e,"position","absolute"),p(e,"top",t.top),p(e,"left",t.left),p(e,"width",t.width),p(e,"height",t.height)}function Tt(e){p(e,"position",""),p(e,"top",""),p(e,"left",""),p(e,"width",""),p(e,"height","")}function Zt(e,t,n){var i={};return Array.from(e.children).forEach(function(o){var a;k(o,t.draggable,e,!1)&&!o.animated&&o!==n&&(a=Y(o),i.left=Math.min((o=i.left)!==null&&o!==void 0?o:1/0,a.left),i.top=Math.min((o=i.top)!==null&&o!==void 0?o:1/0,a.top),i.right=Math.max((o=i.right)!==null&&o!==void 0?o:-1/0,a.right),i.bottom=Math.max((o=i.bottom)!==null&&o!==void 0?o:-1/0,a.bottom))}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var te="Sortable"+new Date().getTime();function pn(){var e,t=[];return{captureAnimationState:function(){t=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(n){var i,o;p(n,"display")!=="none"&&n!==y.ghost&&(t.push({target:n,rect:Y(n)}),i=P({},t[t.length-1].rect),!n.thisAnimationDuration||(o=ye(n,!0))&&(i.top-=o.f,i.left-=o.e),n.fromRect=i)})},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(function(i,o){for(var a in i)if(i.hasOwnProperty(a)){for(var s in o)if(o.hasOwnProperty(s)&&o[s]===i[a][s])return Number(a)}return-1}(t,{target:n}),1)},animateAll:function(n){var i=this;if(!this.options.animation)return clearTimeout(e),void(typeof n=="function"&&n());var o=!1,a=0;t.forEach(function(s){var r=0,l=s.target,h=l.fromRect,g=Y(l),x=l.prevFromRect,X=l.prevToRect,O=s.rect,M=ye(l,!0);M&&(g.top-=M.f,g.left-=M.e),l.toRect=g,l.thisAnimationDuration&&St(x,g)&&!St(h,g)&&(O.top-g.top)/(O.left-g.left)==(h.top-g.top)/(h.left-g.left)&&(s=O,M=x,x=X,X=i.options,r=Math.sqrt(Math.pow(M.top-s.top,2)+Math.pow(M.left-s.left,2))/Math.sqrt(Math.pow(M.top-x.top,2)+Math.pow(M.left-x.left,2))*X.animation),St(g,h)||(l.prevFromRect=h,l.prevToRect=g,r=r||i.options.animation,i.animate(l,O,g,r)),r&&(o=!0,a=Math.max(a,r),clearTimeout(l.animationResetTimer),l.animationResetTimer=setTimeout(function(){l.animationTime=0,l.prevFromRect=null,l.fromRect=null,l.prevToRect=null,l.thisAnimationDuration=null},r),l.thisAnimationDuration=r)}),clearTimeout(e),o?e=setTimeout(function(){typeof n=="function"&&n()},a):typeof n=="function"&&n(),t=[]},animate:function(n,i,o,a){var s,r;a&&(p(n,"transition",""),p(n,"transform",""),s=(r=ye(this.el))&&r.a,r=r&&r.d,s=(i.left-o.left)/(s||1),r=(i.top-o.top)/(r||1),n.animatingX=!!s,n.animatingY=!!r,p(n,"transform","translate3d("+s+"px,"+r+"px,0)"),this.forRepaintDummy=n.offsetWidth,p(n,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),p(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){p(n,"transition",""),p(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},a))}}}var Be=[],_t={initializeByDefault:!0},We={mount:function(e){for(var t in _t)!_t.hasOwnProperty(t)||t in e||(e[t]=_t[t]);Be.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Be.push(e)},pluginEvent:function(e,t,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var o=e+"Global";Be.forEach(function(a){t[a.pluginName]&&(t[a.pluginName][o]&&t[a.pluginName][o](P({sortable:t},n)),t.options[a.pluginName]&&t[a.pluginName][e]&&t[a.pluginName][e](P({sortable:t},n)))})},initializePlugins:function(e,t,n,i){for(var o in Be.forEach(function(s){var r=s.pluginName;(e.options[r]||s.initializeByDefault)&&((s=new s(e,t,e.options)).sortable=e,s.options=e.options,e[r]=s,c(n,s.defaults))}),e.options){var a;e.options.hasOwnProperty(o)&&(a=this.modifyOption(e,o,e.options[o]))!==void 0&&(e.options[o]=a)}},getEventProperties:function(e,t){var n={};return Be.forEach(function(i){typeof i.eventProperties=="function"&&c(n,i.eventProperties.call(t[i.pluginName],e))}),n},modifyOption:function(e,t,n){var i;return Be.forEach(function(o){e[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[t]=="function"&&(i=o.optionListeners[t].call(e[o.pluginName],n))}),i}};function ze(e){var t=e.sortable,n=e.rootEl,i=e.name,o=e.targetEl,a=e.cloneEl,s=e.toEl,r=e.fromEl,l=e.oldIndex,h=e.newIndex,g=e.oldDraggableIndex,x=e.newDraggableIndex,X=e.originalEvent,O=e.putSortable,M=e.extraEventProperties;if(t=t||n&&n[te]){var A,$=t.options,e="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||N||Q?(A=document.createEvent("Event")).initEvent(i,!0,!0):A=new CustomEvent(i,{bubbles:!0,cancelable:!0}),A.to=s||n,A.from=r||n,A.item=o||n,A.clone=a,A.oldIndex=l,A.newIndex=h,A.oldDraggableIndex=g,A.newDraggableIndex=x,A.originalEvent=X,A.pullMode=O?O.lastPutMode:void 0;var D,J=P(P({},M),We.getEventProperties(i,t));for(D in J)A[D]=J[D];n&&n.dispatchEvent(A),$[e]&&$[e].call(t,A)}}function se(e,t){var n=(i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{}).evt,i=b(i,hn);We.pluginEvent.bind(y)(e,t,P({dragEl:u,parentEl:z,ghostEl:S,rootEl:j,nextEl:Me,lastDownEl:ot,cloneEl:K,cloneHidden:Ae,dragStarted:Ge,putSortable:re,activeSortable:y.active,originalEvent:n,oldIndex:Xe,oldDraggableIndex:Ke,newIndex:ce,newDraggableIndex:Pe,hideGhostForTarget:an,unhideGhostForTarget:rn,cloneNowHidden:function(){Ae=!0},cloneNowShown:function(){Ae=!1},dispatchSortableEvent:function(o){ae({sortable:t,name:o,originalEvent:n})}},i))}var hn=["evt"];function ae(e){ze(P({putSortable:re,cloneEl:K,targetEl:u,rootEl:j,oldIndex:Xe,oldDraggableIndex:Ke,newIndex:ce,newDraggableIndex:Pe},e))}var u,z,S,j,Me,ot,K,Ae,Xe,ce,Ke,Pe,it,re,Ne,ge,It,At,Qt,Jt,Ge,Ye,Ue,at,oe,je=!1,rt=!1,st=[],qe=!1,lt=!1,Pt=[],Ot=!1,ct=[],dt=typeof document!="undefined",ut=G,en=Q||N?"cssFloat":"float",fn=dt&&!Qe&&!G&&"draggable"in document.createElement("div"),tn=function(){if(dt){if(N)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),nn=function(h,t){var n=p(h),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=Le(h,0,t),a=Le(h,1,t),s=o&&p(o),r=a&&p(a),l=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+Y(o).width,h=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+Y(a).width;return n.display==="flex"?n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal":n.display==="grid"?n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal":o&&s.float&&s.float!=="none"?(t=s.float==="left"?"left":"right",!a||r.clear!=="both"&&r.clear!==t?"horizontal":"vertical"):o&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||i<=l&&n[en]==="none"||a&&n[en]==="none"&&i<l+h)?"vertical":"horizontal"},on=function(e){function t(o,a){return function(s,r,l,h){var g=s.options.group.name&&r.options.group.name&&s.options.group.name===r.options.group.name;return o==null&&(a||g)?!0:o==null||o===!1?!1:a&&o==="clone"?o:typeof o=="function"?t(o(s,r,l,h),a)(s,r,l,h):(r=(a?s:r).options.group.name,o===!0||typeof o=="string"&&o===r||o.join&&-1<o.indexOf(r))}}var n={},i=e.group;i&&d(i)=="object"||(i={name:i}),n.name=i.name,n.checkPull=t(i.pull,!0),n.checkPut=t(i.put),n.revertClone=i.revertClone,e.group=n},an=function(){!tn&&S&&p(S,"display","none")},rn=function(){!tn&&S&&p(S,"display","")};dt&&!Qe&&document.addEventListener("click",function(e){if(rt)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),rt=!1},!0);function Fe(e){if(u){e=e.touches?e.touches[0]:e;var t=(o=e.clientX,a=e.clientY,st.some(function(r){var l=r[te].options.emptyInsertThreshold;if(l&&!Dt(r)){var h=Y(r),g=o>=h.left-l&&o<=h.right+l,l=a>=h.top-l&&a<=h.bottom+l;return g&&l?s=r:void 0}}),s);if(t){var n,i={};for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[te]._onDragOver(i)}}var o,a,s}function gn(e){u&&u.parentNode[te]._isOutsideThisEl(e.target)}function y(e,t){if(!e||!e.nodeType||e.nodeType!==1)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=c({},t),e[te]=this;var n,i,o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return nn(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,s){a.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:y.supportPointer!==!1&&"PointerEvent"in window&&(!F||G),emptyInsertThreshold:5};for(n in We.initializePlugins(this,e,o),o)n in t||(t[n]=o[n]);for(i in on(t),this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=!t.forceFallback&&fn,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?f(e,"pointerdown",this._onTapStart):(f(e,"mousedown",this._onTapStart),f(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(f(e,"dragover",this),f(e,"dragenter",this)),st.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),c(this,pn())}function pt(e,t,n,i,o,a,s,r){var l,h,g=e[te],x=g.options.onMove;return!window.CustomEvent||N||Q?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=i,l.related=o||t,l.relatedRect=a||Y(t),l.willInsertAfter=r,l.originalEvent=s,e.dispatchEvent(l),h=x?x.call(g,l,s):h}function kt(e){e.draggable=!1}function mn(){Ot=!1}function ht(e){return setTimeout(e,0)}function Mt(e){return clearTimeout(e)}y.prototype={constructor:y,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(Ye=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,u):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,i=this.options,o=i.preventOnFilter,a=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,r=(s||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||r,h=i.filter;if(function(g){ct.length=0;for(var x=g.getElementsByTagName("input"),X=x.length;X--;){var O=x[X];O.checked&&ct.push(O)}}(n),!u&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||i.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!F||!r||r.tagName.toUpperCase()!=="SELECT")&&!((r=k(r,i.draggable,n,!1))&&r.animated||ot===r)){if(Xe=W(r),Ke=W(r,i.draggable),typeof h=="function"){if(h.call(this,e,r,this))return ae({sortable:t,rootEl:l,name:"filter",targetEl:r,toEl:n,fromEl:n}),se("filter",t,{evt:e}),void(o&&e.preventDefault())}else if(h=h&&h.split(",").some(function(g){if(g=k(l,g.trim(),n,!1))return ae({sortable:t,rootEl:g,name:"filter",targetEl:r,fromEl:n,toEl:n}),se("filter",t,{evt:e}),!0}))return void(o&&e.preventDefault());i.handle&&!k(l,i.handle,n,!1)||this._prepareDragStart(e,s,r)}}},_prepareDragStart:function(e,t,n){var i,o=this,a=o.el,s=o.options,r=a.ownerDocument;n&&!u&&n.parentNode===a&&(i=Y(n),j=a,z=(u=n).parentNode,Me=u.nextSibling,ot=n,it=s.group,Ne={target:y.dragged=u,clientX:(t||e).clientX,clientY:(t||e).clientY},Qt=Ne.clientX-i.left,Jt=Ne.clientY-i.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,u.style["will-change"]="all",i=function(){se("delayEnded",o,{evt:e}),y.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!T&&o.nativeDraggable&&(u.draggable=!0),o._triggerDragStart(e,t),ae({sortable:o,name:"choose",originalEvent:e}),_(u,s.chosenClass,!0))},s.ignore.split(",").forEach(function(l){Se(u,l.trim(),kt)}),f(r,"dragover",Fe),f(r,"mousemove",Fe),f(r,"touchmove",Fe),s.supportPointer?(f(r,"pointerup",o._onDrop),this.nativeDraggable||f(r,"pointercancel",o._onDrop)):(f(r,"mouseup",o._onDrop),f(r,"touchend",o._onDrop),f(r,"touchcancel",o._onDrop)),T&&this.nativeDraggable&&(this.options.touchStartThreshold=4,u.draggable=!0),se("delayStart",this,{evt:e}),!s.delay||s.delayOnTouchOnly&&!t||this.nativeDraggable&&(Q||N)?i():y.eventCanceled?this._onDrop():(s.supportPointer?(f(r,"pointerup",o._disableDelayedDrag),f(r,"pointercancel",o._disableDelayedDrag)):(f(r,"mouseup",o._disableDelayedDrag),f(r,"touchend",o._disableDelayedDrag),f(r,"touchcancel",o._disableDelayedDrag)),f(r,"mousemove",o._delayedDragTouchMoveHandler),f(r,"touchmove",o._delayedDragTouchMoveHandler),s.supportPointer&&f(r,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(i,s.delay)))},_delayedDragTouchMoveHandler:function(e){e=e.touches?e.touches[0]:e,Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){u&&kt(u),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;m(e,"mouseup",this._disableDelayedDrag),m(e,"touchend",this._disableDelayedDrag),m(e,"touchcancel",this._disableDelayedDrag),m(e,"pointerup",this._disableDelayedDrag),m(e,"pointercancel",this._disableDelayedDrag),m(e,"mousemove",this._delayedDragTouchMoveHandler),m(e,"touchmove",this._delayedDragTouchMoveHandler),m(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?f(document,"pointermove",this._onTouchMove):f(document,t?"touchmove":"mousemove",this._onTouchMove):(f(u,"dragend",this),f(j,"dragstart",this._onDragStart));try{document.selection?ht(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e,t){var n;je=!1,j&&u?(se("dragStarted",this,{evt:t}),this.nativeDraggable&&f(document,"dragover",gn),n=this.options,e||_(u,n.dragClass,!1),_(u,n.ghostClass,!0),y.active=this,e&&this._appendGhost(),ae({sortable:this,name:"start",originalEvent:t})):this._nulling()},_emulateDragOver:function(){if(ge){this._lastX=ge.clientX,this._lastY=ge.clientY,an();for(var e=document.elementFromPoint(ge.clientX,ge.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ge.clientX,ge.clientY))!==t;)t=e;if(u.parentNode[te]._isOutsideThisEl(e),t)do if(t[te]&&t[te]._onDragOver({clientX:ge.clientX,clientY:ge.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break;while(t=ne(e=t));rn()}},_onTouchMove:function(e){if(Ne){var a=this.options,t=a.fallbackTolerance,n=a.fallbackOffset,i=e.touches?e.touches[0]:e,o=S&&ye(S,!0),s=S&&o&&o.a,r=S&&o&&o.d,a=ut&&oe&&Gt(oe),s=(i.clientX-Ne.clientX+n.x)/(s||1)+(a?a[0]-Pt[0]:0)/(s||1),r=(i.clientY-Ne.clientY+n.y)/(r||1)+(a?a[1]-Pt[1]:0)/(r||1);if(!y.active&&!je){if(t&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<t)return;this._onDragStart(e,!0)}S&&(o?(o.e+=s-(It||0),o.f+=r-(At||0)):o={a:1,b:0,c:0,d:1,e:s,f:r},o="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")"),p(S,"webkitTransform",o),p(S,"mozTransform",o),p(S,"msTransform",o),p(S,"transform",o),It=s,At=r,ge=i),e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!S){var e=this.options.fallbackOnBody?document.body:j,t=Y(u,!0,ut,!0,e),n=this.options;if(ut){for(oe=e;p(oe,"position")==="static"&&p(oe,"transform")==="none"&&oe!==document;)oe=oe.parentNode;oe!==document.body&&oe!==document.documentElement?(oe===document&&(oe=we()),t.top+=oe.scrollTop,t.left+=oe.scrollLeft):oe=we(),Pt=Gt(oe)}_(S=u.cloneNode(!0),n.ghostClass,!1),_(S,n.fallbackClass,!0),_(S,n.dragClass,!0),p(S,"transition",""),p(S,"transform",""),p(S,"box-sizing","border-box"),p(S,"margin",0),p(S,"top",t.top),p(S,"left",t.left),p(S,"width",t.width),p(S,"height",t.height),p(S,"opacity","0.8"),p(S,"position",ut?"absolute":"fixed"),p(S,"zIndex","100000"),p(S,"pointerEvents","none"),y.ghost=S,e.appendChild(S),p(S,"transform-origin",Qt/parseInt(S.style.width)*100+"% "+Jt/parseInt(S.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,i=e.dataTransfer,o=n.options;se("dragStart",this,{evt:e}),y.eventCanceled?this._onDrop():(se("setupClone",this),y.eventCanceled||((K=Ct(u)).removeAttribute("id"),K.draggable=!1,K.style["will-change"]="",this._hideClone(),_(K,this.options.chosenClass,!1),y.clone=K),n.cloneId=ht(function(){se("clone",n),y.eventCanceled||(n.options.removeCloneOnHide||j.insertBefore(K,u),n._hideClone(),ae({sortable:n,name:"clone"}))}),t||_(u,o.dragClass,!0),t?(rt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(m(document,"mouseup",n._onDrop),m(document,"touchend",n._onDrop),m(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",o.setData&&o.setData.call(n,i,u)),f(document,"drop",n),p(u,"transform","translateZ(0)")),je=!0,n._dragStartId=ht(n._dragStarted.bind(n,t,e)),f(document,"selectstart",n),Ge=!0,window.getSelection().removeAllRanges(),F&&p(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,i,o,a,s=this.el,r=e.target,l=this.options,h=l.group,g=y.active,x=it===h,X=l.sort,O=re||g,M=this,A=!1;if(!Ot){if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=k(r,l.draggable,s,!0),Ce("dragOver"),y.eventCanceled)return A;if(u.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||M._ignoreWhileAnimating===r)return Ee(!1);if(rt=!1,g&&!l.disabled&&(x?X||(n=z!==j):re===this||(this.lastPutMode=it.checkPull(this,g,u,e))&&h.checkPut(this,g,u,e))){if(i=this._getDirection(e,r)==="vertical",t=Y(u),Ce("dragOverValid"),y.eventCanceled)return A;if(n)return z=j,Re(),this._hideClone(),Ce("revert"),y.eventCanceled||(Me?j.insertBefore(u,Me):j.appendChild(u)),Ee(!0);var $=Dt(s,l.draggable);if($&&(R=e,h=i,V=Y(Dt((L=this).el,L.options.draggable)),L=Zt(L.el,L.options,S),!(h?R.clientX>L.right+10||R.clientY>V.bottom&&R.clientX>V.left:R.clientY>L.bottom+10||R.clientX>V.right&&R.clientY>V.top)||$.animated)){if($&&(o=e,a=i,H=Y(Le((ie=this).el,0,ie.options,!0)),ie=Zt(ie.el,ie.options,S),a?o.clientX<ie.left-10||o.clientY<H.top&&o.clientX<H.right:o.clientY<ie.top-10||o.clientY<H.bottom&&o.clientX<H.left)){var D=Le(s,0,l,!0);if(D===u)return Ee(!1);if(ue=Y(r=D),pt(j,s,u,t,r,ue,e,!1)!==!1)return Re(),s.insertBefore(u,D),z=s,yt(),Ee(!0)}else if(r.parentNode===s){var J,he,xe,ue=Y(r),L=u.parentNode!==s,R=(R=u.animated&&u.toRect||t,V=r.animated&&r.toRect||ue,ie=(a=i)?R.left:R.top,o=a?R.right:R.bottom,H=a?R.width:R.height,D=a?V.left:V.top,R=a?V.right:V.bottom,V=a?V.width:V.height,!(ie===D||o===R||ie+H/2===D+V/2)),ie=i?"top":"left",H=Kt(r,"top","top")||Kt(u,"top","top"),D=H?H.scrollTop:void 0;if(Ye!==r&&(he=ue[ie],qe=!1,lt=!R&&l.invertSwap||L),(J=function(ke,wt,De,_e,jt,xt,cn,yn){var Te=_e?ke.clientY:ke.clientX,Oe=_e?De.height:De.width,ke=_e?De.top:De.left,_e=_e?De.bottom:De.right,De=!1;if(!cn){if(yn&&at<Oe*jt){if(qe=!qe&&(Ue===1?ke+Oe*xt/2<Te:Te<_e-Oe*xt/2)?!0:qe)De=!0;else if(Ue===1?Te<ke+at:_e-at<Te)return-Ue}else if(ke+Oe*(1-jt)/2<Te&&Te<_e-Oe*(1-jt)/2)return function(wn){return W(u)<W(wn)?1:-1}(wt)}return(De=De||cn)&&(Te<ke+Oe*xt/2||_e-Oe*xt/2<Te)?ke+Oe/2<Te?1:-1:0}(e,r,ue,i,R?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,lt,Ye===r))!==0)for(var bt=W(u);(xe=z.children[bt-=J])&&(p(xe,"display")==="none"||xe===S););if(J===0||xe===r)return Ee(!1);Ue=J;var V=(Ye=r).nextElementSibling,L=!1,R=pt(j,s,u,t,r,ue,e,L=J===1);if(R!==!1)return R!==1&&R!==-1||(L=R===1),Ot=!0,setTimeout(mn,30),Re(),L&&!V?s.appendChild(u):r.parentNode.insertBefore(u,L?V:r),H&&qt(H,0,D-H.scrollTop),z=u.parentNode,he===void 0||lt||(at=Math.abs(he-Y(r)[ie])),yt(),Ee(!0)}}else{if($===u)return Ee(!1);if((r=$&&s===e.target?$:r)&&(ue=Y(r)),pt(j,s,u,t,r,ue,e,!!r)!==!1)return Re(),$&&$.nextSibling?s.insertBefore(u,$.nextSibling):s.appendChild(u),z=s,yt(),Ee(!0)}if(s.contains(u))return Ee(!1)}return!1}function Ce(nt,vn){se(nt,M,P({evt:e,isOwner:x,axis:i?"vertical":"horizontal",revert:n,dragRect:t,targetRect:ue,canSort:X,fromSortable:O,target:r,completed:Ee,onMove:function(wt,bn){return pt(j,s,u,t,wt,Y(wt),e,bn)},changed:yt},vn))}function Re(){Ce("dragOverAnimationCapture"),M.captureAnimationState(),M!==O&&O.captureAnimationState()}function Ee(nt){return Ce("dragOverCompleted",{insertion:nt}),nt&&(x?g._hideClone():g._showClone(M),M!==O&&(_(u,(re||g).options.ghostClass,!1),_(u,l.ghostClass,!0)),re!==M&&M!==y.active?re=M:M===y.active&&re&&(re=null),O===M&&(M._ignoreWhileAnimating=r),M.animateAll(function(){Ce("dragOverAnimationComplete"),M._ignoreWhileAnimating=null}),M!==O&&(O.animateAll(),O._ignoreWhileAnimating=null)),(r===u&&!u.animated||r===s&&!r.animated)&&(Ye=null),l.dragoverBubble||e.rootEl||r===document||(u.parentNode[te]._isOutsideThisEl(e.target),nt||Fe(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),A=!0}function yt(){ce=W(u),Pe=W(u,l.draggable),ae({sortable:M,name:"change",toEl:s,newIndex:ce,newDraggableIndex:Pe,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){m(document,"mousemove",this._onTouchMove),m(document,"touchmove",this._onTouchMove),m(document,"pointermove",this._onTouchMove),m(document,"dragover",Fe),m(document,"mousemove",Fe),m(document,"touchmove",Fe)},_offUpEvents:function(){var e=this.el.ownerDocument;m(e,"mouseup",this._onDrop),m(e,"touchend",this._onDrop),m(e,"pointerup",this._onDrop),m(e,"pointercancel",this._onDrop),m(e,"touchcancel",this._onDrop),m(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;ce=W(u),Pe=W(u,n.draggable),se("drop",this,{evt:e}),z=u&&u.parentNode,ce=W(u),Pe=W(u,n.draggable),y.eventCanceled||(qe=lt=je=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Mt(this.cloneId),Mt(this._dragStartId),this.nativeDraggable&&(m(document,"drop",this),m(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),F&&p(document.body,"user-select",""),p(u,"transform",""),e&&(Ge&&(e.cancelable&&e.preventDefault(),n.dropBubble||e.stopPropagation()),S&&S.parentNode&&S.parentNode.removeChild(S),(j===z||re&&re.lastPutMode!=="clone")&&K&&K.parentNode&&K.parentNode.removeChild(K),u&&(this.nativeDraggable&&m(u,"dragend",this),kt(u),u.style["will-change"]="",Ge&&!je&&_(u,(re||this).options.ghostClass,!1),_(u,this.options.chosenClass,!1),ae({sortable:this,name:"unchoose",toEl:z,newIndex:null,newDraggableIndex:null,originalEvent:e}),j!==z?(0<=ce&&(ae({rootEl:z,name:"add",toEl:z,fromEl:j,originalEvent:e}),ae({sortable:this,name:"remove",toEl:z,originalEvent:e}),ae({rootEl:z,name:"sort",toEl:z,fromEl:j,originalEvent:e}),ae({sortable:this,name:"sort",toEl:z,originalEvent:e})),re&&re.save()):ce!==Xe&&0<=ce&&(ae({sortable:this,name:"update",toEl:z,originalEvent:e}),ae({sortable:this,name:"sort",toEl:z,originalEvent:e})),y.active&&(ce!=null&&ce!==-1||(ce=Xe,Pe=Ke),ae({sortable:this,name:"end",toEl:z,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){se("nulling",this),j=u=z=S=Me=K=ot=Ae=Ne=ge=Ge=ce=Pe=Xe=Ke=Ye=Ue=re=it=y.dragged=y.ghost=y.clone=y.active=null,ct.forEach(function(e){e.checked=!0}),ct.length=It=At=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":u&&(this._onDragOver(e),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,i=0,o=n.length,a=this.options;i<o;i++)k(e=n[i],a.draggable,this.el,!1)&&t.push(e.getAttribute(a.dataIdAttr)||function(s){for(var r=s.tagName+s.className+s.src+s.href+s.textContent,l=r.length,h=0;l--;)h+=r.charCodeAt(l);return h.toString(36)}(e));return t},sort:function(e,t){var n={},i=this.el;this.toArray().forEach(function(o,a){a=i.children[a],k(a,this.options.draggable,i,!1)&&(n[o]=a)},this),t&&this.captureAnimationState(),e.forEach(function(o){n[o]&&(i.removeChild(n[o]),i.appendChild(n[o]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return k(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(t===void 0)return n[e];var i=We.modifyOption(this,e,t);n[e]=i!==void 0?i:t,e==="group"&&on(n)},destroy:function(){se("destroy",this);var e=this.el;e[te]=null,m(e,"mousedown",this._onTapStart),m(e,"touchstart",this._onTapStart),m(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(m(e,"dragover",this),m(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),st.splice(st.indexOf(this.el),1),this.el=e=null},_hideClone:function(){Ae||(se("hideClone",this),y.eventCanceled||(p(K,"display","none"),this.options.removeCloneOnHide&&K.parentNode&&K.parentNode.removeChild(K),Ae=!0))},_showClone:function(e){e.lastPutMode==="clone"?Ae&&(se("showClone",this),y.eventCanceled||(u.parentNode!=j||this.options.group.revertClone?Me?j.insertBefore(K,Me):j.appendChild(K):j.insertBefore(K,u),this.options.group.revertClone&&this.animate(u,K),p(K,"display",""),Ae=!1)):this._hideClone()}},dt&&f(document,"touchmove",function(e){(y.active||je)&&e.cancelable&&e.preventDefault()}),y.utils={on:f,off:m,css:p,find:Se,is:function(e,t){return!!k(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:Ut,closest:k,toggleClass:_,clone:Ct,index:W,nextTick:ht,cancelNextTick:Mt,detectDirection:nn,getChild:Le,expando:te},y.get=function(e){return e[te]},y.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];(t=t[0].constructor===Array?t[0]:t).forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(y.utils=P(P({},y.utils),i.utils)),We.mount(i)})},y.create=function(e,t){return new y(e,t)};var $e,Nt,Ft,Rt,ft,Ze,q=[],Lt=!(y.version="1.15.6");function gt(){q.forEach(function(e){clearInterval(e.pid)}),q=[]}function sn(){clearInterval(Ze)}var me,Bt=Ut(function(e,t,n,i){if(t.scroll){var o,a=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,r=t.scrollSensitivity,l=t.scrollSpeed,h=we(),g=!1;Nt!==n&&(Nt=n,gt(),$e=t.scroll,o=t.scrollFn,$e===!0&&($e=Ie(n,!0)));var x=0,X=$e;do{var O=X,L=Y(O),M=L.top,A=L.bottom,$=L.left,D=L.right,J=L.width,he=L.height,xe=void 0,bt=void 0,ue=O.scrollWidth,ie=O.scrollHeight,H=p(O),V=O.scrollLeft,L=O.scrollTop,bt=O===h?(xe=J<ue&&(H.overflowX==="auto"||H.overflowX==="scroll"||H.overflowX==="visible"),he<ie&&(H.overflowY==="auto"||H.overflowY==="scroll"||H.overflowY==="visible")):(xe=J<ue&&(H.overflowX==="auto"||H.overflowX==="scroll"),he<ie&&(H.overflowY==="auto"||H.overflowY==="scroll")),V=xe&&(Math.abs(D-a)<=r&&V+J<ue)-(Math.abs($-a)<=r&&!!V),L=bt&&(Math.abs(A-s)<=r&&L+he<ie)-(Math.abs(M-s)<=r&&!!L);if(!q[x])for(var R=0;R<=x;R++)q[R]||(q[R]={});q[x].vx==V&&q[x].vy==L&&q[x].el===O||(q[x].el=O,q[x].vx=V,q[x].vy=L,clearInterval(q[x].pid),V==0&&L==0||(g=!0,q[x].pid=setInterval(function(){i&&this.layer===0&&y.active._onTouchMove(ft);var Ce=q[this.layer].vy?q[this.layer].vy*l:0,Re=q[this.layer].vx?q[this.layer].vx*l:0;typeof o=="function"&&o.call(y.dragged.parentNode[te],Re,Ce,e,ft,q[this.layer].el)!=="continue"||qt(q[this.layer].el,Re,Ce)}.bind({layer:x}),24))),x++}while(t.bubbleScroll&&X!==h&&(X=Ie(X,!1)));Lt=g}},30),Qe=function(r){var t=r.originalEvent,n=r.putSortable,i=r.dragEl,o=r.activeSortable,a=r.dispatchSortableEvent,s=r.hideGhostForTarget,r=r.unhideGhostForTarget;t&&(o=n||o,s(),t=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,t=document.elementFromPoint(t.clientX,t.clientY),r(),o&&!o.el.contains(t)&&(a("spill"),this.onSpill({dragEl:i,putSortable:n})))};function Xt(){}function Yt(){}Xt.prototype={startIndex:null,dragStart:function(e){e=e.oldDraggableIndex,this.startIndex=e},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState(),e=Le(this.sortable.el,this.startIndex,this.options),e?this.sortable.el.insertBefore(t,e):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:Qe},c(Xt,{pluginName:"revertOnSpill"}),Yt.prototype={onSpill:function(n){var t=n.dragEl,n=n.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:Qe},c(Yt,{pluginName:"removeOnSpill"});var Je,ve,B,et,mt,E=[],de=[],tt=!1,le=!1,He=!1;function ln(e,t){de.forEach(function(n,i){i=t.children[n.sortableIndex+(e?Number(i):0)],i?t.insertBefore(n,i):t.appendChild(n)})}function vt(){E.forEach(function(e){e!==B&&e.parentNode&&e.parentNode.removeChild(e)})}return y.mount(new function(){function e(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(t){t=t.originalEvent,this.sortable.nativeDraggable?f(document,"dragover",this._handleAutoScroll):this.options.supportPointer?f(document,"pointermove",this._handleFallbackAutoScroll):t.touches?f(document,"touchmove",this._handleFallbackAutoScroll):f(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){t=t.originalEvent,this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?m(document,"dragover",this._handleAutoScroll):(m(document,"pointermove",this._handleFallbackAutoScroll),m(document,"touchmove",this._handleFallbackAutoScroll),m(document,"mousemove",this._handleFallbackAutoScroll)),sn(),gt(),clearTimeout(U),U=void 0},nulling:function(){ft=Nt=$e=Lt=Ze=Ft=Rt=null,q.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,n){var i,o=this,a=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,r=document.elementFromPoint(a,s);ft=t,n||this.options.forceAutoScrollFallback||Q||N||F?(Bt(t,this.options,r,n),i=Ie(r,!0),!Lt||Ze&&a===Ft&&s===Rt||(Ze&&sn(),Ze=setInterval(function(){var l=Ie(document.elementFromPoint(a,s),!0);l!==i&&(i=l,gt()),Bt(t,o.options,l,n)},10),Ft=a,Rt=s)):this.options.bubbleScroll&&Ie(r,!0)!==we()?Bt(t,this.options,Ie(r,!1),!1):gt()}},c(e,{pluginName:"scroll",initializeByDefault:!0})}),y.mount(Yt,Xt),y.mount(new function(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(t){t=t.dragEl,me=t},dragOverValid:function(t){var n=t.completed,i=t.target,o=t.onMove,a=t.activeSortable,s=t.changed,r=t.cancel;a.options.swap&&(t=this.sortable.el,a=this.options,i&&i!==t&&(t=me,me=o(i)!==!1?(_(i,a.swapClass,!0),i):null,t&&t!==me&&_(t,a.swapClass,!1)),s(),n(!0),r())},drop:function(t){var n,i,o=t.activeSortable,a=t.putSortable,s=t.dragEl,r=a||this.sortable,l=this.options;me&&_(me,l.swapClass,!1),me&&(l.swap||a&&a.options.swap)&&s!==me&&(r.captureAnimationState(),r!==o&&o.captureAnimationState(),i=me,t=(n=s).parentNode,l=i.parentNode,t&&l&&!t.isEqualNode(i)&&!l.isEqualNode(n)&&(a=W(n),s=W(i),t.isEqualNode(l)&&a<s&&s++,t.insertBefore(i,t.children[a]),l.insertBefore(n,l.children[s])),r.animateAll(),r!==o&&o.animateAll())},nulling:function(){me=null}},c(e,{pluginName:"swap",eventProperties:function(){return{swapItem:me}}})}),y.mount(new function(){function e(t){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));t.options.avoidImplicitDeselect||(t.options.supportPointer?f(document,"pointerup",this._deselectMultiDrag):(f(document,"mouseup",this._deselectMultiDrag),f(document,"touchend",this._deselectMultiDrag))),f(document,"keydown",this._checkKeyDown),f(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(i,o){var a="";E.length&&ve===t?E.forEach(function(s,r){a+=(r?", ":"")+s.textContent}):a=o.textContent,i.setData("Text",a)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){t=t.dragEl,B=t},delayEnded:function(){this.isMultiDrag=~E.indexOf(B)},setupClone:function(i){var n=i.sortable,i=i.cancel;if(this.isMultiDrag){for(var o=0;o<E.length;o++)de.push(Ct(E[o])),de[o].sortableIndex=E[o].sortableIndex,de[o].draggable=!1,de[o].style["will-change"]="",_(de[o],this.options.selectedClass,!1),E[o]===B&&_(de[o],this.options.chosenClass,!1);n._hideClone(),i()}},clone:function(a){var n=a.sortable,i=a.rootEl,o=a.dispatchSortableEvent,a=a.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||E.length&&ve===n&&(ln(!0,i),o("clone"),a()))},showClone:function(o){var n=o.cloneNowShown,i=o.rootEl,o=o.cancel;this.isMultiDrag&&(ln(!1,i),de.forEach(function(a){p(a,"display","")}),n(),mt=!1,o())},hideClone:function(o){var n=this,i=(o.sortable,o.cloneNowHidden),o=o.cancel;this.isMultiDrag&&(de.forEach(function(a){p(a,"display","none"),n.options.removeCloneOnHide&&a.parentNode&&a.parentNode.removeChild(a)}),i(),mt=!0,o())},dragStartGlobal:function(t){t.sortable,!this.isMultiDrag&&ve&&ve.multiDrag._deselectMultiDrag(),E.forEach(function(n){n.sortableIndex=W(n)}),E=E.sort(function(n,i){return n.sortableIndex-i.sortableIndex}),He=!0},dragStarted:function(o){var n,i=this,o=o.sortable;this.isMultiDrag&&(this.options.sort&&(o.captureAnimationState(),this.options.animation&&(E.forEach(function(a){a!==B&&p(a,"position","absolute")}),n=Y(B,!1,!0,!0),E.forEach(function(a){a!==B&&$t(a,n)}),tt=le=!0)),o.animateAll(function(){tt=le=!1,i.options.animation&&E.forEach(function(a){Tt(a)}),i.options.sort&&vt()}))},dragOver:function(o){var n=o.target,i=o.completed,o=o.cancel;le&&~E.indexOf(n)&&(i(!1),o())},revert:function(t){var n,i,o=t.fromSortable,a=t.rootEl,s=t.sortable,r=t.dragRect;1<E.length&&(E.forEach(function(l){s.addAnimationState({target:l,rect:le?Y(l):r}),Tt(l),l.fromRect=r,o.removeAnimationState(l)}),le=!1,n=!this.options.removeCloneOnHide,i=a,E.forEach(function(l,h){h=i.children[l.sortableIndex+(n?Number(h):0)],h?i.insertBefore(l,h):i.appendChild(l)}))},dragOverCompleted:function(h){var n,i=h.sortable,o=h.isOwner,a=h.insertion,s=h.activeSortable,r=h.parentEl,l=h.putSortable,h=this.options;a&&(o&&s._hideClone(),tt=!1,h.animation&&1<E.length&&(le||!o&&!s.options.sort&&!l)&&(n=Y(B,!1,!0,!0),E.forEach(function(g){g!==B&&($t(g,n),r.appendChild(g))}),le=!0),o||(le||vt(),1<E.length?(o=mt,s._showClone(i),s.options.animation&&!mt&&o&&de.forEach(function(g){s.addAnimationState({target:g,rect:et}),g.fromRect=et,g.thisAnimationDuration=null})):s._showClone(i)))},dragOverAnimationCapture:function(o){var n=o.dragRect,i=o.isOwner,o=o.activeSortable;E.forEach(function(a){a.thisAnimationDuration=null}),o.options.animation&&!i&&o.multiDrag.isMultiDrag&&(et=c({},n),n=ye(B,!0),et.top-=n.f,et.left-=n.e)},dragOverAnimationComplete:function(){le&&(le=!1,vt())},drop:function(A){var n,i,o,a,s,r,l,h=A.originalEvent,g=A.rootEl,x=A.parentEl,X=A.sortable,O=A.dispatchSortableEvent,M=A.oldIndex,A=A.putSortable,$=A||this.sortable;h&&(n=this.options,i=x.children,He||(n.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),_(B,n.selectedClass,!~E.indexOf(B)),~E.indexOf(B)?(E.splice(E.indexOf(B),1),Je=null,ze({sortable:X,rootEl:g,name:"deselect",targetEl:B,originalEvent:h})):(E.push(B),ze({sortable:X,rootEl:g,name:"select",targetEl:B,originalEvent:h}),h.shiftKey&&Je&&X.el.contains(Je)?(o=W(Je),a=W(B),~o&&~a&&o!==a&&function(){for(var D,J=o<a?(D=o,a):(D=a,o+1),he=n.filter;D<J;D++)~E.indexOf(i[D])||k(i[D],n.draggable,x,!1)&&(he&&(typeof he=="function"?he.call(X,h,i[D],X):he.split(",").some(function(xe){return k(i[D],xe.trim(),x,!1)}))||(_(i[D],n.selectedClass,!0),E.push(i[D]),ze({sortable:X,rootEl:g,name:"select",targetEl:i[D],originalEvent:h})))}()):Je=B,ve=$)),He&&this.isMultiDrag&&(le=!1,(x[te].options.sort||x!==g)&&1<E.length&&(s=Y(B),r=W(B,":not(."+this.options.selectedClass+")"),!tt&&n.animation&&(B.thisAnimationDuration=null),$.captureAnimationState(),tt||(n.animation&&(B.fromRect=s,E.forEach(function(D){var J;D.thisAnimationDuration=null,D!==B&&(J=le?Y(D):s,D.fromRect=J,$.addAnimationState({target:D,rect:J}))})),vt(),E.forEach(function(D){i[r]?x.insertBefore(D,i[r]):x.appendChild(D),r++}),M===W(B)&&(l=!1,E.forEach(function(D){D.sortableIndex!==W(D)&&(l=!0)}),l&&(O("update"),O("sort")))),E.forEach(function(D){Tt(D)}),$.animateAll()),ve=$),(g===x||A&&A.lastPutMode!=="clone")&&de.forEach(function(D){D.parentNode&&D.parentNode.removeChild(D)}))},nullingGlobal:function(){this.isMultiDrag=He=!1,de.length=0},destroyGlobal:function(){this._deselectMultiDrag(),m(document,"pointerup",this._deselectMultiDrag),m(document,"mouseup",this._deselectMultiDrag),m(document,"touchend",this._deselectMultiDrag),m(document,"keydown",this._checkKeyDown),m(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(He!==void 0&&He||ve!==this.sortable||t&&k(t.target,this.options.draggable,this.sortable.el,!1)||t&&t.button!==0))for(;E.length;){var n=E[0];_(n,this.options.selectedClass,!1),E.shift(),ze({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:n,originalEvent:t})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},c(e,{pluginName:"multiDrag",utils:{select:function(t){var n=t.parentNode[te];n&&n.options.multiDrag&&!~E.indexOf(t)&&(ve&&ve!==n&&(ve.multiDrag._deselectMultiDrag(),ve=n),_(t,n.options.selectedClass,!0),E.push(t))},deselect:function(t){var n=t.parentNode[te],i=E.indexOf(t);n&&n.options.multiDrag&&~i&&(_(t,n.options.selectedClass,!1),E.splice(i,1))}},eventProperties:function(){var t=this,n=[],i=[];return E.forEach(function(o){var a;n.push({multiDragElement:o,index:o.sortableIndex}),a=le&&o!==B?-1:le?W(o,":not(."+t.options.selectedClass+")"):W(o),i.push({multiDragElement:o,index:a})}),{items:w(E),clones:[].concat(de),oldIndicies:n,newIndicies:i}},optionListeners:{multiDragKey:function(t){return(t=t.toLowerCase())==="ctrl"?t="Control":1<t.length&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}),y})});var An={};Cn(An,{default:()=>Et});module.exports=_n(An);var C=require("obsidian"),In=dn(),be="custom-sort-view-v29-visual-tweaks",un={order:{},collapsedState:[],rowPadding:2,indentation:9,rainbowColors:["#ff7875","#ff9c6e","#fadb14","#95de64","#5cdbd3","#69c0ff","#b37feb","#ff85c0"]},zt=class extends C.PluginSettingTab{constructor(d,c){super(d,c);this.plugin=c}display(){let{containerEl:d}=this;d.empty(),d.createEl("h2",{text:"\u81EA\u5B9A\u4E49\u6392\u5E8F\u63D2\u4EF6\u8BBE\u7F6E"}),new C.Setting(d).setName("\u6587\u4EF6\u884C\u9AD8 (Padding)").setDesc("\u8C03\u6574\u6BCF\u4E00\u884C\u6587\u4EF6/\u6587\u4EF6\u5939\u7684\u4E0A\u4E0B\u95F4\u8DDD\u3002").addSlider(b=>b.setLimits(0,10,1).setValue(this.plugin.settings.rowPadding).setDynamicTooltip().onChange(async w=>{this.plugin.settings.rowPadding=w,await this.plugin.saveSettings(),this.plugin.refreshAllViews()})),new C.Setting(d).setName("\u5185\u5BB9\u7F29\u8FDB (Content Padding)").setDesc("\u8C03\u6574\u7AD6\u7EBF\u53F3\u4FA7\u5185\u5BB9\uFF08\u6587\u4EF6\u540D\uFF09\u7684\u8DDD\u79BB\u3002\u7AD6\u7EBF\u4F4D\u7F6E\u4FDD\u6301\u4E0D\u53D8\u3002").addSlider(b=>b.setLimits(5,50,1).setValue(this.plugin.settings.indentation).setDynamicTooltip().onChange(async w=>{this.plugin.settings.indentation=w,await this.plugin.saveSettings(),this.plugin.refreshAllViews()})),d.createEl("h3",{text:"\u5F69\u8679\u5361\u7247\u914D\u8272 (\u5FAA\u73AF\u4F7F\u7528)"});let c=d.createDiv();c.style.display="flex",c.style.flexWrap="wrap",c.style.gap="10px",this.plugin.settings.rainbowColors.forEach((b,w)=>{new C.Setting(c).setName(`\u989C\u8272 ${w+1}`).addColorPicker(v=>v.setValue(b).onChange(async I=>{this.plugin.settings.rainbowColors[w]=I,await this.plugin.saveSettings(),this.plugin.refreshAllViews()}))}),new C.Setting(d).setName("\u91CD\u7F6E\u989C\u8272").setDesc("\u6062\u590D\u9ED8\u8BA4\u7684\u5F69\u8679\u914D\u8272\u3002").addButton(b=>b.setButtonText("\u91CD\u7F6E").onClick(async()=>{this.plugin.settings.rainbowColors=[...un.rainbowColors],await this.plugin.saveSettings(),this.plugin.refreshAllViews(),this.display()}))}},Ve=class extends C.ItemView{constructor(d,c){super(d);this.activeFilePath=null;this.plugin=c}getViewType(){return be}getDisplayText(){return"\u81EA\u5B9A\u4E49\u6392\u5E8F"}getIcon(){return"folder"}async onOpen(){let d=this.app.workspace.getActiveFile();d&&(this.activeFilePath=d.path),this.refresh()}async revealItem(d){if(!d)return;this.activeFilePath=d.path;let c=d.parent,b=!1;for(;c&&!c.isRoot();)this.plugin.settings.collapsedState.includes(c.path)&&(this.plugin.settings.collapsedState.remove(c.path),b=!0),c=c.parent;b&&await this.plugin.saveSettings(),this.refresh(),setTimeout(()=>{let w=null;d instanceof C.TFile?w=this.containerEl.querySelector(`.my-custom-row[data-file-path="${d.path}"]`):w=Array.from(this.containerEl.querySelectorAll(".my-custom-row")).find(I=>I.getAttribute("data-folder-path")===d.path),w&&(this.containerEl.querySelectorAll(".is-active").forEach(v=>v.removeClass("is-active")),w.addClass("is-active"),w.scrollIntoView({behavior:"smooth",block:"center"}))},200)}refresh(){if(!this.containerEl||!this.containerEl.children[1])return;let d=this.containerEl.children[1];d.empty(),d.addClass("nav-files-container");let c=this.plugin.settings.rowPadding,b=this.plugin.settings.indentation,w=document.createElement("style");w.textContent=`
            .my-top-toolbar {
                display: flex; align-items: center; justify-content: center;
                gap: 16px; padding: 6px 8px; margin-bottom: 8px;
                border-bottom: 1px solid var(--background-modifier-border);
                background-color: var(--background-primary);
            }
            .my-toolbar-btn {
                display: flex; align-items: center; justify-content: center;
                width: 32px; height: 28px; border-radius: 4px;
                color: var(--text-muted); cursor: pointer; transition: all 0.1s;
            }
            .my-toolbar-btn:hover { background-color: var(--background-modifier-hover); color: var(--text-normal); }
            
            .my-custom-row {
                display: flex !important; align-items: center !important; cursor: pointer;
                border-radius: 4px; margin-bottom: 1px;
                transition: background-color 0.1s; position: relative;
                padding-right: 4px;
                padding-top: ${c}px;
                padding-bottom: ${c}px;
            }
            .my-custom-row:hover { background-color: var(--nav-item-background-hover); }
            
            .my-custom-row.is-active {
                background-color: var(--nav-item-background-active) !important;
                color: var(--text-on-accent);
            }
            .my-custom-row.is-active .my-folder-text,
            .my-custom-row.is-active .my-file-text,
            .my-custom-row.is-active .my-icon-box {
                color: var(--text-normal) !important;
            }

            .my-folder-text { font-weight: 700; color: var(--text-normal); }
            .my-file-text { font-weight: 400; color: var(--text-normal); }

            .my-custom-row:hover + .my-children-container {
                background-color: rgba(var(--mono-rgb-100), 0.08); border-radius: 4px;
            }

            .my-root-card {
                margin-bottom: 8px; background-color: transparent; 
                border-radius: 6px 0 0 6px; 
                position: relative; overflow: visible; transition: z-index 0s;
                border-top: 1px solid var(--this-folder-color);
                border-bottom: 1px solid var(--this-folder-color);
                border-left: none; border-right: none; 
            }
            .my-root-card:hover { z-index: 100; }

            .my-root-card::before {
                content: ''; position: absolute; left: 0; 
                top: -1px; bottom: 0; 
                width: 4px;
                background-color: var(--this-folder-color); 
                z-index: 10; border-top-left-radius: 4px; border-bottom-left-radius: 4px;
            }
            
            .my-root-card-header {
                background-color: var(--background-secondary);
                padding: 6px 12px 6px 16px !important; 
                border-bottom: 1px solid var(--background-modifier-border);
                position: relative; z-index: 2; 
            }

            .my-children-container {
                margin-left: 11px; 
                padding-left: ${b}px; 
                border-left: 2px solid var(--nav-indentation-guide-color);
                transition: border-color 0.2s; min-height: 10px;
            }
            .my-root-children-container {
                border-left: none !important; margin-left: 0 !important; padding-left: 12px !important; 
            }

            .my-icon-box {
                display: flex; align-items: center; justify-content: center;
                width: 24px; height: 24px; flex-shrink: 0; margin-right: 2px; 
            }
            .my-root-card .my-type-icon { color: var(--this-folder-color) !important; }
            .my-type-icon { color: var(--text-accent); }
            
            .my-title-text {
                flex: 1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
            }
            .my-file-badge {
                font-size: 9px; font-weight: bold; padding: 1px 5px; border-radius: 3px;
                margin-left: auto; margin-right: 6px; color: rgba(255,255,255, 0.95);
            }

            .my-action-group { display: none; align-items: center; gap: 2px; }
            .my-custom-row:hover .my-action-group { display: flex; }

            .my-action-btn {
                display: flex; align-items: center; justify-content: center;
                width: 20px; height: 20px; border-radius: 3px;
                color: var(--text-muted); opacity: 0.7; position: relative;
            }
            .my-action-btn:hover { background-color: var(--background-modifier-hover); opacity: 1; color: var(--text-normal); }

            .my-hover-menu {
                display: none; position: absolute; top: 100%; right: 0;
                background-color: var(--background-primary);
                border: 1px solid var(--background-modifier-border);
                box-shadow: 0 4px 12px rgba(0,0,0,0.4);
                border-radius: 4px; padding: 4px; z-index: 9999; 
                width: 120px; flex-direction: column; gap: 2px;
            }
            .my-action-btn:hover .my-hover-menu, .my-hover-menu:hover { display: flex; }
            
            .my-menu-item {
                display: flex; align-items: center; padding: 4px 8px;
                font-size: 12px; border-radius: 4px; color: var(--text-normal); cursor: pointer;
            }
            .my-menu-item:hover { background-color: var(--interactive-accent); color: var(--text-on-accent); }
            .my-menu-icon { margin-right: 6px; width: 14px; height: 14px; }
        `,d.appendChild(w);let v=d.createDiv("my-top-toolbar"),I=v.createDiv("my-toolbar-btn");(0,C.setIcon)(I,"file-plus"),I.onclick=()=>this.createNewItem(this.app.vault.getRoot(),"md");let N=v.createDiv("my-toolbar-btn");(0,C.setIcon)(N,"folder-plus"),N.onclick=()=>this.createNewItem(this.app.vault.getRoot(),"folder");let Q=v.createDiv("my-toolbar-btn"),T=this.app.vault.getRoot().children,F=!1;for(let f of T)if(f instanceof C.TFolder&&!this.plugin.settings.collapsedState.includes(f.path)){F=!0;break}(0,C.setIcon)(Q,F?"chevrons-up":"chevrons-down"),Q.onclick=async()=>{let f=!1;if(F)for(let m of T)m instanceof C.TFolder&&!this.plugin.settings.collapsedState.includes(m.path)&&(this.plugin.settings.collapsedState.push(m.path),f=!0);else for(let m of T)m instanceof C.TFolder&&(this.plugin.settings.collapsedState.remove(m.path),f=!0);f&&(await this.plugin.saveSettings(),this.refresh())};let ee=this.app.vault.getRoot();this.renderFolder(d,ee,0,0)}renderFolder(d,c,b,w){let v=d;if(c.isRoot())v.setAttribute("data-folder-path","/");else{let T=d.createDiv("nav-folder");if(b===1){let _=this.plugin.settings.rainbowColors,p=_[w%_.length];T.style.setProperty("--this-folder-color",p),T.addClass("my-root-card")}let F=T.createDiv("my-custom-row");F.setAttribute("data-folder-path",c.path),b===1&&F.addClass("my-root-card-header"),b>1&&(F.style.paddingLeft="0px");let G=F.createDiv("my-icon-box my-type-icon");F.createDiv("my-title-text my-folder-text").setText(c.name),this.activeFilePath===c.path&&F.addClass("is-active");let f=F.createDiv("my-action-group"),m=f.createDiv("my-action-btn"),pe=!1,ne=!1;for(let _ of c.children)if(_ instanceof C.TFolder&&(ne=!0,!this.plugin.settings.collapsedState.includes(_.path))){pe=!0;break}ne?((0,C.setIcon)(m,pe?"chevrons-up":"chevrons-down"),m.addEventListener("click",async _=>{_.stopPropagation();let p=!1,ye=c.children;if(pe)for(let Se of ye)Se instanceof C.TFolder&&!this.plugin.settings.collapsedState.includes(Se.path)&&(this.plugin.settings.collapsedState.push(Se.path),p=!0);else for(let Se of ye)Se instanceof C.TFolder&&(this.plugin.settings.collapsedState.remove(Se.path),p=!0);p&&(await this.plugin.saveSettings(),this.refresh())})):m.style.display="none";let k=f.createDiv("my-action-btn");(0,C.setIcon)(k,"plus"),k.addEventListener("click",_=>{_.stopPropagation(),this.createNewItem(c,"md")});let U=k.createDiv("my-hover-menu");this.createMenuItem(U,"file-plus","\u65B0\u5EFA\u7B14\u8BB0",()=>this.createNewItem(c,"md")),this.createMenuItem(U,"folder-plus","\u65B0\u5EFA\u6587\u4EF6\u5939",()=>this.createNewItem(c,"folder")),this.createMenuItem(U,"layout-dashboard","\u65B0\u5EFA\u767D\u677F",()=>this.createNewItem(c,"canvas")),this.addNativeContextMenu(F,c),v=T.createDiv("my-children-container"),v.setAttribute("data-folder-path",c.path),b===1&&v.addClass("my-root-children-container"),this.plugin.settings.collapsedState.includes(c.path)?(T.addClass("is-collapsed"),v.style.display="none",(0,C.setIcon)(G,"lucide-folder")):(T.classList.remove("is-collapsed"),v.style.display="block",(0,C.setIcon)(G,"lucide-folder-open")),F.addEventListener("click",async _=>{_.stopPropagation();let p=T.classList.contains("is-collapsed");G.empty(),p?(T.classList.remove("is-collapsed"),v.style.display="block",(0,C.setIcon)(G,"lucide-folder-open"),this.plugin.settings.collapsedState.remove(c.path)):(T.classList.add("is-collapsed"),v.style.display="none",(0,C.setIcon)(G,"lucide-folder"),this.plugin.settings.collapsedState.includes(c.path)||this.plugin.settings.collapsedState.push(c.path)),await this.plugin.saveSettings()})}let I=c.children,N=this.plugin.settings.order[c.path];N&&(I=I.slice().sort((T,F)=>{let G=N.indexOf(T.name),ee=N.indexOf(F.name);return G!==-1&&ee!==-1?G-ee:G!==-1?-1:ee!==-1?1:T.name.localeCompare(F.name)}));let Q=w;for(let T of I){let F=v.createDiv();F.setAttribute("data-name",T.name),F.setAttribute("data-file-path",T.path);let G=c.isRoot()?1:b+1,ee=Q;if(b===0&&T instanceof C.TFolder&&(ee=Q++),T instanceof C.TFile){let f=F.createDiv("my-custom-row");f.setAttribute("data-file-path",T.path),this.activeFilePath===T.path&&f.addClass("is-active");let m=f.createDiv("my-icon-box my-type-icon"),pe=this.getFileIcon(T.extension);if((0,C.setIcon)(m,pe),f.createDiv("my-title-text my-file-text").setText(T.basename),T.extension!=="md"){let k=this.getFileBadgeInfo(T.extension),U=f.createDiv("my-file-badge");U.setText(k.text),U.style.backgroundColor=k.color}this.addNativeContextMenu(f,T),f.addEventListener("click",k=>{k.stopPropagation(),this.app.workspace.getLeaf(!1).openFile(T)})}else T instanceof C.TFolder&&this.renderFolder(F,T,G,ee)}In.create(v,{group:"obsidian-sort",animation:150,ghostClass:"sortable-ghost",onEnd:async T=>{let F=T.item,G=T.to,ee=T.from,f=G.getAttribute("data-folder-path");if(!f)return;let m=[],pe=G.children;for(let ne=0;ne<pe.length;ne++){let U=pe[ne].getAttribute("data-name");U&&m.push(U)}if(this.plugin.settings.order[f]=m,G!==ee){let ne=ee.getAttribute("data-folder-path");if(ne){let k=[],U=ee.children;for(let fe=0;fe<U.length;fe++){let p=U[fe].getAttribute("data-name");p&&k.push(p)}this.plugin.settings.order[ne]=k}}if(await this.plugin.saveSettings(),G!==ee){let ne=F.getAttribute("data-file-path");if(ne){let k=this.app.vault.getAbstractFileByPath(ne),U=f==="/"?"":f,fe=this.app.vault.getAbstractFileByPath(U||"/");if(k&&fe instanceof C.TFolder){let _=(fe.isRoot()?"":fe.path+"/")+k.name;await this.app.fileManager.renameFile(k,_)}}}this.plugin.refreshAllViews()}})}createMenuItem(d,c,b,w){let v=d.createDiv("my-menu-item"),I=v.createDiv("my-menu-icon");(0,C.setIcon)(I,`lucide-${c}`),v.createSpan({text:b}),v.addEventListener("click",N=>{N.stopPropagation(),w()})}addNativeContextMenu(d,c){d.addEventListener("contextmenu",b=>{b.preventDefault();let w=new C.Menu;this.app.workspace.trigger("file-menu",w,c,"file-explorer"),w.addSeparator(),w.addItem(v=>{v.setTitle(c instanceof C.TFolder?"\u91CD\u547D\u540D\u6587\u4EF6\u5939":"\u91CD\u547D\u540D").setIcon("lucide-pencil").onClick(()=>{this.app.fileManager.promptForFileRename(c)})}),w.addItem(v=>{v.setTitle(c instanceof C.TFolder?"\u5220\u9664\u6587\u4EF6\u5939":"\u5220\u9664").setIcon("lucide-trash").onClick(()=>{this.app.fileManager.promptForFileDeletion(c)})}),w.showAtPosition({x:b.pageX,y:b.pageY})})}async createNewItem(d,c){let b=d.isRoot()?"":d.path+"/",w=Date.now();try{let v;c==="md"?(v=await this.app.vault.create(b+"\u672A\u547D\u540D\u7B14\u8BB0 "+w+".md",""),this.app.workspace.getLeaf(!1).openFile(v)):c==="folder"?v=await this.app.vault.createFolder(b+"\u672A\u547D\u540D\u6587\u4EF6\u5939 "+w):(v=await this.app.vault.create(b+"\u672A\u547D\u540D\u767D\u677F "+w+".canvas",'{"nodes":[],"edges":[]}'),this.app.workspace.getLeaf(!1).openFile(v)),setTimeout(()=>{this.app.fileManager.promptForFileRename(v),this.revealItem(v)},300)}catch(v){}}getFileIcon(d){switch(d.toLowerCase()){case"pdf":return"pdf-file";case"png":case"jpg":case"jpeg":case"svg":return"image-file";default:return"document"}}getFileBadgeInfo(d){let c=d.toUpperCase();switch(d.toLowerCase()){case"pdf":return{text:"PDF",color:"#4b8585"};case"png":case"jpg":case"jpeg":case"gif":case"svg":case"webp":return{text:"IMG",color:"#7d6a96"};case"doc":case"docx":return{text:"DOC",color:"#5b7db1"};case"ppt":case"pptx":return{text:"PPT",color:"#c26565"};case"xls":case"xlsx":case"csv":return{text:"XLS",color:"#6a9c65"};case"mp4":case"mov":case"avi":case"mkv":return{text:"MOV",color:"#a86588"};case"py":case"js":case"r":case"css":case"html":case"java":case"cpp":return{text:"CODE",color:"#6688aa"};case"txt":return{text:"TXT",color:"#666666"};default:return{text:c,color:"#757575"}}}},Et=class extends C.Plugin{constructor(){super(...arguments);this.isRenameRefreshPending=!1}async onload(){await this.loadSettings(),this.registerView(be,d=>new Ve(d,this)),this.addSettingTab(new zt(this.app,this)),this.addRibbonIcon("folder","\u6253\u5F00\u81EA\u5B9A\u4E49\u6392\u5E8F",()=>{this.activateView()}),this.registerEvent(this.app.workspace.on("file-open",d=>{d&&this.app.workspace.getLeavesOfType(be).forEach(c=>{c.view instanceof Ve&&c.view.revealItem(d)})})),this.app.workspace.onLayoutReady(()=>{let d=this.app.internalPlugins;if(d){let c=d.getPluginById("file-explorer");c&&c.instance&&(this.originalRevealInFolder=c.instance.revealInFolder,c.instance.revealInFolder=b=>{let w=this.app.workspace.getLeavesOfType(be);w.length>0?(this.app.workspace.revealLeaf(w[0]),w[0].view.revealItem(b)):this.activateView().then(()=>{let v=this.app.workspace.getLeavesOfType(be);v.length>0&&v[0].view.revealItem(b)})})}setTimeout(()=>{let c=this.app.workspace.getActiveFile();c&&this.app.workspace.getLeavesOfType(be).forEach(b=>{b.view instanceof Ve&&b.view.revealItem(c)})},1e3)}),this.registerEvent(this.app.vault.on("create",async d=>{if(!this.isRenameRefreshPending&&d instanceof C.TFile){let c=d.parent,b=c?c.path:"/";if(!this.settings.order[b]){let I=(c?c.children:this.app.vault.getRoot().children).filter(N=>N.name!==d.name).map(N=>N.name).sort((N,Q)=>N.localeCompare(Q));this.settings.order[b]=I}let w=this.settings.order[b];w.includes(d.name)&&w.remove(d.name),w.push(d.name),await this.saveSettings(),this.refreshAllViews(),setTimeout(()=>{this.app.workspace.getLeavesOfType(be).forEach(v=>{v.view.revealItem(d)})},300)}})),this.registerEvent(this.app.vault.on("rename",async(d,c)=>{if(this.isRenameRefreshPending=!0,this.app.workspace.getLeavesOfType(be).forEach(v=>{let I=v.view;I.activeFilePath===c&&(I.activeFilePath=d.path)}),d instanceof C.TFolder){let v=c,I=d.path,N=[];for(let Q of this.settings.collapsedState)Q===v?N.push(I):Q.startsWith(v+"/")?N.push(Q.replace(v,I)):N.push(Q);this.settings.collapsedState=N}let b=d.parent?d.parent.path:"/",w=this.settings.order[b];if(w){let v=c.split("/").pop();if(v){let I=w.indexOf(v);I!==-1&&(w[I]=d.name)}}await this.saveSettings(),this.isRenameRefreshPending=!1,this.refreshAllViews()})),this.registerEvent(this.app.vault.on("delete",()=>{this.isRenameRefreshPending||this.refreshAllViews()}))}onunload(){let d=this.app.internalPlugins;if(d&&this.originalRevealInFolder){let c=d.getPluginById("file-explorer");c&&c.instance&&(c.instance.revealInFolder=this.originalRevealInFolder)}}refreshAllViews(){this.app.workspace.getLeavesOfType(be).forEach(d=>{d.view instanceof Ve&&d.view.refresh()})}async loadSettings(){this.settings=Object.assign({},un,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}async activateView(){let{workspace:d}=this.app,c=null,b=d.getLeavesOfType(be);if(b.length>0)c=b[0];else{let w=d.getLeftLeaf(!1);w&&(c=w,await c.setViewState({type:be,active:!0}))}c&&d.revealLeaf(c)}};
/*! Bundled license information:

sortablejs/Sortable.min.js:
  (*! Sortable 1.15.6 - MIT | git://github.com/SortableJS/Sortable.git *)
*/
